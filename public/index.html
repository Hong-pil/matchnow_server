<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Match Now - ìŠ¤í¬ì¸  ë§¤ì¹­ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.0/axios.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; color: #333; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header { background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 30px; margin-bottom: 30px; text-align: center; }
        .header h1 { font-size: 3em; background: linear-gradient(45deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 10px; }
        .nav-tabs { display: flex; background: rgba(255, 255, 255, 0.9); border-radius: 15px; padding: 5px; margin-bottom: 30px; }
        .nav-tab { flex: 1; padding: 15px 20px; background: transparent; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; }
        .nav-tab.active { background: linear-gradient(45deg, #667eea, #764ba2); color: white; }
        .content-panel { display: none; background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 30px; }
        .content-panel.active { display: block; }
        .controls { display: flex; gap: 15px; margin-bottom: 30px; flex-wrap: wrap; }
        .form-group { display: flex; flex-direction: column; gap: 5px; }
        .form-control { padding: 12px 16px; border: 2px solid #e1e8ed; border-radius: 10px; min-width: 200px; }
        .btn { padding: 12px 24px; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; margin: 5px; }
        .btn-primary { background: linear-gradient(45deg, #667eea, #764ba2); color: white; }
        .btn-success { background: linear-gradient(45deg, #4CAF50, #45a049); color: white; }
        .btn-danger { background: linear-gradient(45deg, #ff6b6b, #ee5a52); color: white; }
        .data-grid { display: grid; gap: 20px; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); }
        .data-card { background: #f8f9fa; border-radius: 15px; padding: 25px; transition: all 0.3s ease; }
        .data-card:hover { transform: translateY(-5px); box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        .loading { text-align: center; padding: 50px; color: #666; }
        .error { background: #ff6b6b; color: white; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center; }
        .success { background: #4CAF50; color: white; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 15px; text-align: center; }
        .stat-card h3 { font-size: 2.5em; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš½ Match Now</h1>
            <p>ìŠ¤í¬ì¸  ë§¤ì¹­ ê´€ë¦¬ ì‹œìŠ¤í…œ</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" id="tab-dashboard">ëŒ€ì‹œë³´ë“œ</button>
            <button class="nav-tab" id="tab-countries">êµ­ê°€</button>
            <button class="nav-tab" id="tab-sports">ìŠ¤í¬ì¸  ì¹´í…Œê³ ë¦¬</button>
            <button class="nav-tab" id="tab-leagues">ë¦¬ê·¸</button>
            <button class="nav-tab" id="tab-teams">íŒ€</button>
            <button class="nav-tab" id="tab-players">ì„ ìˆ˜</button>
        </div>

        <!-- ëŒ€ì‹œë³´ë“œ íŒ¨ë„ -->
        <div id="dashboard" class="content-panel active">
            <h2>ğŸ“Š ëŒ€ì‹œë³´ë“œ</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3 id="countriesCount">0</h3>
                    <p>êµ­ê°€</p>
                </div>
                <div class="stat-card">
                    <h3 id="sportsCount">0</h3>
                    <p>ìŠ¤í¬ì¸  ì¹´í…Œê³ ë¦¬</p>
                </div>
                <div class="stat-card">
                    <h3 id="leaguesCount">0</h3>
                    <p>ë¦¬ê·¸</p>
                </div>
                <div class="stat-card">
                    <h3 id="teamsCount">0</h3>
                    <p>íŒ€</p>
                </div>
                <div class="stat-card">
                    <h3 id="playersCount">0</h3>
                    <p>ì„ ìˆ˜</p>
                </div>
            </div>
        </div>

        <!-- êµ­ê°€ íŒ¨ë„ -->
        <div id="countries" class="content-panel">
            <h2>ğŸŒ êµ­ê°€ ê´€ë¦¬</h2>
            <div class="controls">
                <div class="form-group">
                    <label>ìƒˆ êµ­ê°€ ì¶”ê°€</label>
                    <input type="text" id="newCountryName" class="form-control" placeholder="êµ­ê°€ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                </div>
                <button class="btn btn-success" id="addCountryBtn">â• êµ­ê°€ ì¶”ê°€</button>
                <button class="btn btn-primary" id="refreshCountriesBtn">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
            </div>
            <div id="countriesData" class="data-grid"></div>
        </div>

        <!-- ìŠ¤í¬ì¸  ì¹´í…Œê³ ë¦¬ íŒ¨ë„ -->
        <div id="sports" class="content-panel">
            <h2>ğŸƒ ìŠ¤í¬ì¸  ì¹´í…Œê³ ë¦¬ ê´€ë¦¬</h2>
            <div class="controls">
                <div class="form-group">
                    <label>ì¹´í…Œê³ ë¦¬ëª… (í•œêµ­ì–´)</label>
                    <input type="text" id="newSportsName" class="form-control" placeholder="ì˜ˆ: ì¶•êµ¬">
                </div>
                <div class="form-group">
                    <label>ì¹´í…Œê³ ë¦¬ëª… (ì˜ì–´)</label>
                    <input type="text" id="newSportsNameEn" class="form-control" placeholder="ì˜ˆ: football">
                </div>
                <button class="btn btn-success" id="addSportsBtn">â• ì¹´í…Œê³ ë¦¬ ì¶”ê°€</button>
                <button class="btn btn-primary" id="refreshSportsBtn">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
            </div>
            <div id="sportsData" class="data-grid"></div>
        </div>

        <!-- ë¦¬ê·¸ íŒ¨ë„ -->
        <div id="leagues" class="content-panel">
            <h2>ğŸ† ë¦¬ê·¸ ê´€ë¦¬</h2>
            <div class="controls">
                <div class="form-group">
                    <label>ë¦¬ê·¸ëª…</label>
                    <input type="text" id="newLeagueName" class="form-control" placeholder="ì˜ˆ: í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸">
                </div>
                <div class="form-group">
                    <label>ë¦¬ê·¸ ì•½ì¹­</label>
                    <input type="text" id="newLeagueNameShort" class="form-control" placeholder="ì˜ˆ: EPL">
                </div>
                <div class="form-group">
                    <label>êµ­ê°€</label>
                    <select id="newLeagueCountry" class="form-control">
                        <option value="">êµ­ê°€ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ìŠ¤í¬ì¸  ì¹´í…Œê³ ë¦¬</label>
                    <select id="newLeagueSports" class="form-control">
                        <option value="">ìŠ¤í¬ì¸ ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ì„¤ëª…</label>
                    <input type="text" id="newLeagueDescription" class="form-control" placeholder="ë¦¬ê·¸ ì„¤ëª…">
                </div>
                <div class="form-group">
                    <label>BATS ID</label>
                    <input type="text" id="newLeagueBatsId" class="form-control" placeholder="ì˜ˆ: 94">
                </div>
                <button class="btn btn-success" id="addLeagueBtn">â• ë¦¬ê·¸ ì¶”ê°€</button>
                <button class="btn btn-primary" id="refreshLeaguesBtn">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
            </div>
            <div id="leaguesData" class="data-grid"></div>
        </div>

        <!-- íŒ€ íŒ¨ë„ -->
        <div id="teams" class="content-panel">
            <h2>âš½ íŒ€ ê´€ë¦¬</h2>
            <div class="controls">
                <div class="form-group">
                    <label>íŒ€ëª…</label>
                    <input type="text" id="newTeamName" class="form-control" placeholder="ì˜ˆ: í† íŠ¸ë„˜">
                </div>
                <div class="form-group">
                    <label>íŒ€ ì„¤ëª…</label>
                    <input type="text" id="newTeamDescription" class="form-control" placeholder="íŒ€ ì„¤ëª…">
                </div>
                <div class="form-group">
                    <label>êµ­ê°€</label>
                    <select id="newTeamCountry" class="form-control">
                        <option value="">êµ­ê°€ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ìŠ¤í¬ì¸  ì¹´í…Œê³ ë¦¬</label>
                    <select id="newTeamSports" class="form-control">
                        <option value="">ìŠ¤í¬ì¸ ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>í™ˆêµ¬ì¥</label>
                    <input type="text" id="newTeamStadium" class="form-control" placeholder="ì˜ˆ: Tottenham Hotspur Stadium">
                </div>
                <div class="form-group">
                    <label>BATS ID</label>
                    <input type="text" id="newTeamBatsId" class="form-control" placeholder="ì˜ˆ: 8910">
                </div>
                <button class="btn btn-success" id="addTeamBtn">â• íŒ€ ì¶”ê°€</button>
                <button class="btn btn-primary" id="refreshTeamsBtn">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
            </div>
            <div id="teamsData" class="data-grid"></div>
        </div>

        <!-- ì„ ìˆ˜ íŒ¨ë„ -->
        <div id="players" class="content-panel">
            <h2>ğŸƒâ€â™‚ï¸ ì„ ìˆ˜ ê´€ë¦¬</h2>
            <div class="controls">
                <div class="form-group">
                    <label>ì„ ìˆ˜ëª… (í•œêµ­ì–´)</label>
                    <input type="text" id="newPlayerName" class="form-control" placeholder="ì˜ˆ: ì†í¥ë¯¼">
                </div>
                <div class="form-group">
                    <label>ì„ ìˆ˜ëª… (ì˜ì–´)</label>
                    <input type="text" id="newPlayerNameEn" class="form-control" placeholder="ì˜ˆ: Son Heung-min">
                </div>
                <div class="form-group">
                    <label>í¬ì§€ì…˜</label>
                    <input type="text" id="newPlayerPosition" class="form-control" placeholder="ì˜ˆ: ê³µê²©ìˆ˜">
                </div>
                <button class="btn btn-success" id="addPlayerBtn">â• ì„ ìˆ˜ ì¶”ê°€</button>
                <button class="btn btn-primary" id="refreshPlayersBtn">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
            </div>
            <div id="playersData" class="data-grid"></div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        const API_BASE = 'http://localhost/api/v1';
        const api = axios.create({
            baseURL: API_BASE,
            timeout: 10000,
            headers: { 'Content-Type': 'application/json' }
        });

        // ì „ì—­ ë°ì´í„° ì €ì¥ì†Œ
        let countriesData = [];
        let sportsData = [];

        // êµ­ê°€ì™€ ìŠ¤í¬ì¸  ë°ì´í„° ë¡œë“œ (ì…€ë ‰íŠ¸ë°•ìŠ¤ìš©)
        async function loadSelectOptions() {
            try {
                const [countriesRes, sportsRes] = await Promise.allSettled([
                    api.get('/countries?limit=100'),
                    api.get('/sports-categories?limit=100')
                ]);

                if (countriesRes.status === 'fulfilled') {
                    countriesData = countriesRes.value.data.data.results || [];
                }
                if (sportsRes.status === 'fulfilled') {
                    sportsData = sportsRes.value.data.data.results || [];
                }

                updateSelectOptions();
            } catch (error) {
                console.error('ì…€ë ‰íŠ¸ ì˜µì…˜ ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }

        function updateSelectOptions() {
            // ë¦¬ê·¸ ì…€ë ‰íŠ¸ë°•ìŠ¤ ì—…ë°ì´íŠ¸
            const leagueCountrySelect = document.getElementById('newLeagueCountry');
            const leagueSportsSelect = document.getElementById('newLeagueSports');
            
            if (leagueCountrySelect) {
                leagueCountrySelect.innerHTML = '<option value="">êµ­ê°€ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>' +
                    countriesData.map(c => `<option value="${c._id}">${c.name}</option>`).join('');
            }
            
            if (leagueSportsSelect) {
                leagueSportsSelect.innerHTML = '<option value="">ìŠ¤í¬ì¸ ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>' +
                    sportsData.map(s => `<option value="${s._id}">${s.name}</option>`).join('');
            }

            // íŒ€ ì…€ë ‰íŠ¸ë°•ìŠ¤ ì—…ë°ì´íŠ¸
            const teamCountrySelect = document.getElementById('newTeamCountry');
            const teamSportsSelect = document.getElementById('newTeamSports');
            
            if (teamCountrySelect) {
                teamCountrySelect.innerHTML = '<option value="">êµ­ê°€ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>' +
                    countriesData.map(c => `<option value="${c._id}">${c.name}</option>`).join('');
            }
            
            if (teamSportsSelect) {
                teamSportsSelect.innerHTML = '<option value="">ìŠ¤í¬ì¸ ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>' +
                    sportsData.map(s => `<option value="${s._id}">${s.name}</option>`).join('');
            }
        }

        // ë©”ì‹œì§€ í•¨ìˆ˜
        function showError(message) {
            console.error('âŒ ì—ëŸ¬:', message);
            const div = document.createElement('div');
            div.className = 'error';
            div.textContent = message;
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 5000);
        }

        function showSuccess(message) {
            console.log('âœ… ì„±ê³µ:', message);
            const div = document.createElement('div');
            div.className = 'success';
            div.textContent = message;
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 3000);
        }

        // íƒ­ ì „í™˜ í•¨ìˆ˜
        function switchToPanel(panelId) {
            console.log('ğŸ”„ íŒ¨ë„ ì „í™˜:', panelId);
            
            // ëª¨ë“  íŒ¨ë„ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.content-panel').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            
            // ì„ íƒëœ íŒ¨ë„ ë³´ì´ê¸°
            const panel = document.getElementById(panelId);
            const tab = document.getElementById('tab-' + panelId);
            
            if (panel && tab) {
                panel.classList.add('active');
                tab.classList.add('active');
                console.log('âœ… íŒ¨ë„ ì „í™˜ ì™„ë£Œ:', panelId);
                
            // ë°ì´í„° ë¡œë“œ
            if (panelId === 'dashboard') loadDashboard();
            else if (panelId === 'countries') loadCountries();
            else if (panelId === 'sports') loadSportsCategories();
            else if (panelId === 'leagues') {
                loadSelectOptions();
                loadLeagues();
            }
            else if (panelId === 'teams') {
                loadSelectOptions();
                loadTeams();
            }
            else if (panelId === 'players') loadPlayers();

            // íŒ¨ë„ ì „í™˜ ì‹œ ì…€ë ‰íŠ¸ ì˜µì…˜ ë¡œë“œ
            if (panelId === 'leagues' || panelId === 'teams') {
                loadSelectOptions();
            }
            }
        }

        // ëŒ€ì‹œë³´ë“œ
        async function loadDashboard() {
            console.log('ğŸ“Š ëŒ€ì‹œë³´ë“œ ë¡œë“œ');
            try {
                const results = await Promise.allSettled([
                    api.get('/countries'),
                    api.get('/sports-categories'),
                    api.get('/leagues'),
                    api.get('/teams'),
                    api.get('/players')
                ]);

                document.getElementById('countriesCount').textContent = 
                    results[0].status === 'fulfilled' ? (results[0].value.data.data.totalCount || 0) : 0;
                document.getElementById('sportsCount').textContent = 
                    results[1].status === 'fulfilled' ? (results[1].value.data.data.totalCount || 0) : 0;
                document.getElementById('leaguesCount').textContent = 
                    results[2].status === 'fulfilled' ? (results[2].value.data.data.totalCount || 0) : 0;
                document.getElementById('teamsCount').textContent = 
                    results[3].status === 'fulfilled' ? (results[3].value.data.data.totalCount || 0) : 0;
                document.getElementById('playersCount').textContent = 
                    results[4].status === 'fulfilled' ? (results[4].value.data.data.totalCount || 0) : 0;
            } catch (error) {
                console.error('ëŒ€ì‹œë³´ë“œ ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }

        // êµ­ê°€ ê´€ë¦¬
        async function loadCountries() {
            console.log('ğŸŒ êµ­ê°€ ë¡œë“œ');
            const container = document.getElementById('countriesData');
            container.innerHTML = '<div class="loading">ë¡œë”© ì¤‘...</div>';

            try {
                const response = await api.get('/countries?limit=50');
                const countries = response.data.data.results || [];
                
                if (countries.length === 0) {
                    container.innerHTML = '<p style="text-align: center;">ë“±ë¡ëœ êµ­ê°€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                    return;
                }

                container.innerHTML = countries.map(c => `
                    <div class="data-card">
                        <h3>ğŸŒ ${c.name}</h3>
                        <p><strong>ID:</strong> ${c._id}</p>
                        <p><strong>ìƒì„±ì¼:</strong> ${new Date(c.createdAt).toLocaleDateString()}</p>
                        <div style="margin-top: 15px;">
                            <button class="btn btn-danger" onclick="deleteCountry('${c._id}')">ğŸ—‘ï¸ ì‚­ì œ</button>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                container.innerHTML = '<div class="error">ë¡œë“œ ì‹¤íŒ¨</div>';
            }
        }

        async function createCountry() {
            const name = document.getElementById('newCountryName').value.trim();
            if (!name) {
                showError('êµ­ê°€ëª…ì„ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }

            try {
                await api.post('/countries', { name });
                showSuccess('êµ­ê°€ ì¶”ê°€ ì„±ê³µ');
                document.getElementById('newCountryName').value = '';
                loadCountries();
                loadDashboard();
            } catch (error) {
                showError('êµ­ê°€ ì¶”ê°€ ì‹¤íŒ¨');
            }
        }

        async function deleteCountry(id) {
            if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            try {
                await api.delete(`/countries/${id}`);
                showSuccess('êµ­ê°€ ì‚­ì œ ì„±ê³µ');
                loadCountries();
                loadDashboard();
            } catch (error) {
                showError('êµ­ê°€ ì‚­ì œ ì‹¤íŒ¨');
            }
        }

        // ìŠ¤í¬ì¸  ì¹´í…Œê³ ë¦¬
        async function loadSportsCategories() {
            console.log('ğŸƒ ìŠ¤í¬ì¸  ì¹´í…Œê³ ë¦¬ ë¡œë“œ');
            const container = document.getElementById('sportsData');
            container.innerHTML = '<div class="loading">ë¡œë”© ì¤‘...</div>';

            try {
                const response = await api.get('/sports-categories?limit=50');
                const sports = response.data.data.results || [];
                
                if (sports.length === 0) {
                    container.innerHTML = '<p style="text-align: center;">ë“±ë¡ëœ ì¹´í…Œê³ ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                    return;
                }

                container.innerHTML = sports.map(s => `
                    <div class="data-card">
                        <h3>ğŸƒ ${s.name}</h3>
                        <p><strong>ì˜ì–´ëª…:</strong> ${s.nameEn}</p>
                        <p><strong>ìƒì„±ì¼:</strong> ${new Date(s.createdAt).toLocaleDateString()}</p>
                        <div style="margin-top: 15px;">
                            <button class="btn btn-danger" onclick="deleteSportsCategory('${s._id}')">ğŸ—‘ï¸ ì‚­ì œ</button>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                container.innerHTML = '<div class="error">ë¡œë“œ ì‹¤íŒ¨</div>';
            }
        }

        async function createSportsCategory() {
            const name = document.getElementById('newSportsName').value.trim();
            const nameEn = document.getElementById('newSportsNameEn').value.trim();
            
            if (!name || !nameEn) {
                showError('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }

            try {
                await api.post('/sports-categories', { name, nameEn });
                showSuccess('ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ì„±ê³µ');
                document.getElementById('newSportsName').value = '';
                document.getElementById('newSportsNameEn').value = '';
                loadSportsCategories();
                loadDashboard();
            } catch (error) {
                showError('ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ì‹¤íŒ¨');
            }
        }

        async function deleteSportsCategory(id) {
            if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            try {
                await api.delete(`/sports-categories/${id}`);
                showSuccess('ì¹´í…Œê³ ë¦¬ ì‚­ì œ ì„±ê³µ');
                loadSportsCategories();
                loadDashboard();
            } catch (error) {
                showError('ì¹´í…Œê³ ë¦¬ ì‚­ì œ ì‹¤íŒ¨');
            }
        }

        // ì„ ìˆ˜ ê´€ë¦¬
        async function loadPlayers() {
            console.log('ğŸƒâ€â™‚ï¸ ì„ ìˆ˜ ë¡œë“œ');
            const container = document.getElementById('playersData');
            container.innerHTML = '<div class="loading">ë¡œë”© ì¤‘...</div>';

            try {
                const response = await api.get('/players?limit=50');
                const players = response.data.data.results || [];
                
                if (players.length === 0) {
                    container.innerHTML = '<p style="text-align: center;">ë“±ë¡ëœ ì„ ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                    return;
                }

                container.innerHTML = players.map(p => `
                    <div class="data-card">
                        <h3>ğŸƒâ€â™‚ï¸ ${p.name}</h3>
                        <p><strong>ì˜ì–´ëª…:</strong> ${p.nameEn}</p>
                        ${p.position ? `<p><strong>í¬ì§€ì…˜:</strong> ${p.position}</p>` : ''}
                        <p><strong>ìƒì„±ì¼:</strong> ${new Date(p.createdAt).toLocaleDateString()}</p>
                        <div style="margin-top: 15px;">
                            <button class="btn btn-danger" onclick="deletePlayer('${p._id}')">ğŸ—‘ï¸ ì‚­ì œ</button>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                container.innerHTML = '<div class="error">ë¡œë“œ ì‹¤íŒ¨</div>';
            }
        }

        async function createPlayer() {
            const name = document.getElementById('newPlayerName').value.trim();
            const nameEn = document.getElementById('newPlayerNameEn').value.trim();
            const position = document.getElementById('newPlayerPosition').value.trim();
            
            if (!name || !nameEn) {
                showError('ì„ ìˆ˜ëª…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.');
                return;
            }

            try {
                const data = { name, nameEn };
                if (position) data.position = position;
                
                await api.post('/players', data);
                showSuccess('ì„ ìˆ˜ ì¶”ê°€ ì„±ê³µ');
                document.getElementById('newPlayerName').value = '';
                document.getElementById('newPlayerNameEn').value = '';
                document.getElementById('newPlayerPosition').value = '';
                loadPlayers();
                loadDashboard();
            } catch (error) {
                showError('ì„ ìˆ˜ ì¶”ê°€ ì‹¤íŒ¨');
            }
        }

        async function deletePlayer(id) {
            if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            try {
                await api.delete(`/players/${id}`);
                showSuccess('ì„ ìˆ˜ ì‚­ì œ ì„±ê³µ');
                loadPlayers();
                loadDashboard();
            } catch (error) {
                showError('ì„ ìˆ˜ ì‚­ì œ ì‹¤íŒ¨');
            }
        }

        // ë¦¬ê·¸ ê´€ë¦¬
        async function createLeague() {
            const name = document.getElementById('newLeagueName').value.trim();
            const nameShort = document.getElementById('newLeagueNameShort').value.trim();
            const countryId = document.getElementById('newLeagueCountry').value;
            const sportsCategoryId = document.getElementById('newLeagueSports').value;
            const description = document.getElementById('newLeagueDescription').value.trim();
            const batsId = document.getElementById('newLeagueBatsId').value.trim();
            
            console.log('ğŸ† ë¦¬ê·¸ ìƒì„± ë°ì´í„°:', { name, nameShort, countryId, sportsCategoryId, description, batsId });
            
            if (!name || !countryId || !sportsCategoryId || !description || !batsId) {
                showError('í•„ìˆ˜ í•„ë“œë¥¼ ëª¨ë‘ ì…ë ¥í•˜ì„¸ìš” (ë¦¬ê·¸ëª…, êµ­ê°€, ìŠ¤í¬ì¸ , ì„¤ëª…, BATS ID).');
                return;
            }

            try {
                const data = {
                    name,
                    countryId,
                    sportsCategoryId,
                    description,
                    batsId
                };
                
                if (nameShort) data.nameShort = nameShort;
                
                console.log('ğŸ“¤ ì „ì†¡í•  ë¦¬ê·¸ ë°ì´í„°:', data);
                await api.post('/leagues', data);
                showSuccess('ë¦¬ê·¸ ì¶”ê°€ ì„±ê³µ');
                
                // í¼ ì´ˆê¸°í™”
                document.getElementById('newLeagueName').value = '';
                document.getElementById('newLeagueNameShort').value = '';
                document.getElementById('newLeagueCountry').value = '';
                document.getElementById('newLeagueSports').value = '';
                document.getElementById('newLeagueDescription').value = '';
                document.getElementById('newLeagueBatsId').value = '';
                
                loadLeagues();
                loadDashboard();
            } catch (error) {
                console.error('âŒ ë¦¬ê·¸ ì¶”ê°€ ì‹¤íŒ¨:', error);
                showError('ë¦¬ê·¸ ì¶”ê°€ ì‹¤íŒ¨: ' + (error.response?.data?.message || error.message));
            }
        }

        async function loadLeagues() {
            console.log('ğŸ† ë¦¬ê·¸ ë¡œë“œ');
            const container = document.getElementById('leaguesData');
            container.innerHTML = '<div class="loading">ë¡œë”© ì¤‘...</div>';

            try {
                const response = await api.get('/leagues?limit=50');
                const leagues = response.data.data.result || [];
                
                if (leagues.length === 0) {
                    container.innerHTML = '<p style="text-align: center;">ë“±ë¡ëœ ë¦¬ê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                    return;
                }

                container.innerHTML = leagues.map(l => `
                    <div class="data-card">
                        <h3>ğŸ† ${l.name}</h3>
                        ${l.nameShort ? `<p><strong>ì•½ì¹­:</strong> ${l.nameShort}</p>` : ''}
                        <p><strong>êµ­ê°€:</strong> ${l.country?.name || 'N/A'}</p>
                        <p><strong>ìŠ¤í¬ì¸ :</strong> ${l.sportsCategory?.name || 'N/A'}</p>
                        <p><strong>ì„¤ëª…:</strong> ${l.description}</p>
                        <p><strong>BATS ID:</strong> ${l.batsId}</p>
                        <div style="margin-top: 15px;">
                            <button class="btn btn-danger" onclick="deleteLeague('${l._id}')">ğŸ—‘ï¸ ì‚­ì œ</button>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                container.innerHTML = '<div class="error">ë¡œë“œ ì‹¤íŒ¨</div>';
            }
        }

        async function deleteLeague(id) {
            if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            try {
                await api.delete(`/leagues/${id}`);
                showSuccess('ë¦¬ê·¸ ì‚­ì œ ì„±ê³µ');
                loadLeagues();
                loadDashboard();
            } catch (error) {
                showError('ë¦¬ê·¸ ì‚­ì œ ì‹¤íŒ¨');
            }
        }

        // íŒ€ ê´€ë¦¬
        async function createTeam() {
            const name = document.getElementById('newTeamName').value.trim();
            const description = document.getElementById('newTeamDescription').value.trim();
            const countryId = document.getElementById('newTeamCountry').value;
            const sportsCategoryId = document.getElementById('newTeamSports').value;
            const stadiumName = document.getElementById('newTeamStadium').value.trim();
            const batsId = document.getElementById('newTeamBatsId').value.trim();
            
            console.log('âš½ íŒ€ ìƒì„± ë°ì´í„°:', { name, description, countryId, sportsCategoryId, stadiumName, batsId });
            
            if (!name || !countryId || !sportsCategoryId) {
                showError('í•„ìˆ˜ í•„ë“œë¥¼ ëª¨ë‘ ì…ë ¥í•˜ì„¸ìš” (íŒ€ëª…, êµ­ê°€, ìŠ¤í¬ì¸ ).');
                return;
            }

            try {
                const data = {
                    name,
                    countryId,
                    sportsCategoryId,
                    players: [] // ë¹ˆ ì„ ìˆ˜ ë°°ì—´
                };
                
                if (description) data.description = description;
                if (stadiumName) data.stadiumName = stadiumName;
                if (batsId) data.batsId = batsId;
                
                console.log('ğŸ“¤ ì „ì†¡í•  íŒ€ ë°ì´í„°:', data);
                await api.post('/teams', data);
                showSuccess('íŒ€ ì¶”ê°€ ì„±ê³µ');
                
                // í¼ ì´ˆê¸°í™”
                document.getElementById('newTeamName').value = '';
                document.getElementById('newTeamDescription').value = '';
                document.getElementById('newTeamCountry').value = '';
                document.getElementById('newTeamSports').value = '';
                document.getElementById('newTeamStadium').value = '';
                document.getElementById('newTeamBatsId').value = '';
                
                loadTeams();
                loadDashboard();
            } catch (error) {
                console.error('âŒ íŒ€ ì¶”ê°€ ì‹¤íŒ¨:', error);
                showError('íŒ€ ì¶”ê°€ ì‹¤íŒ¨: ' + (error.response?.data?.message || error.message));
            }
        }

        // íŒ€ ë¡œë“œ
        async function loadTeams() {
            console.log('âš½ íŒ€ ë¡œë“œ');
            const container = document.getElementById('teamsData');
            container.innerHTML = '<div class="loading">ë¡œë”© ì¤‘...</div>';

            try {
                const response = await api.get('/teams?limit=50');
                const teams = response.data.data.result || [];
                
                if (teams.length === 0) {
                    container.innerHTML = '<p style="text-align: center;">ë“±ë¡ëœ íŒ€ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                    return;
                }

                container.innerHTML = teams.map(t => `
                    <div class="data-card">
                        <h3>âš½ ${t.name}</h3>
                        ${t.description ? `<p><strong>ì„¤ëª…:</strong> ${t.description}</p>` : ''}
                        <p><strong>êµ­ê°€:</strong> ${t.country?.name || 'N/A'}</p>
                        <p><strong>ìŠ¤í¬ì¸ :</strong> ${t.sportsCategory?.name || 'N/A'}</p>
                        ${t.stadiumName ? `<p><strong>í™ˆêµ¬ì¥:</strong> ${t.stadiumName}</p>` : ''}
                        <p><strong>ì„ ìˆ˜ ìˆ˜:</strong> ${t.players?.length || 0}ëª…</p>
                        ${t.batsId ? `<p><strong>BATS ID:</strong> ${t.batsId}</p>` : ''}
                        <div style="margin-top: 15px;">
                            <button class="btn btn-danger" onclick="deleteTeam('${t._id}')">ğŸ—‘ï¸ ì‚­ì œ</button>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                container.innerHTML = '<div class="error">ë¡œë“œ ì‹¤íŒ¨</div>';
            }
        }

        async function deleteTeam(id) {
            if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            try {
                await api.delete(`/teams/${id}`);
                showSuccess('íŒ€ ì‚­ì œ ì„±ê³µ');
                loadTeams();
                loadDashboard();
            } catch (error) {
                showError('íŒ€ ì‚­ì œ ì‹¤íŒ¨');
            }
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        document.addEventListener('DOMContentLoaded', function() {
            console.log('âœ… í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            
            // íƒ­ í´ë¦­ ì´ë²¤íŠ¸
            document.getElementById('tab-dashboard').addEventListener('click', () => switchToPanel('dashboard'));
            document.getElementById('tab-countries').addEventListener('click', () => switchToPanel('countries'));
            document.getElementById('tab-sports').addEventListener('click', () => switchToPanel('sports'));
            document.getElementById('tab-leagues').addEventListener('click', () => switchToPanel('leagues'));
            document.getElementById('tab-teams').addEventListener('click', () => switchToPanel('teams'));
            document.getElementById('tab-players').addEventListener('click', () => switchToPanel('players'));
            
            // ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
            document.getElementById('addCountryBtn').addEventListener('click', createCountry);
            document.getElementById('refreshCountriesBtn').addEventListener('click', loadCountries);
            document.getElementById('addSportsBtn').addEventListener('click', createSportsCategory);
            document.getElementById('refreshSportsBtn').addEventListener('click', loadSportsCategories);
            document.getElementById('addLeagueBtn').addEventListener('click', createLeague);
            document.getElementById('refreshLeaguesBtn').addEventListener('click', loadLeagues);
            document.getElementById('addTeamBtn').addEventListener('click', createTeam);
            document.getElementById('refreshTeamsBtn').addEventListener('click', loadTeams);
            document.getElementById('addPlayerBtn').addEventListener('click', createPlayer);
            document.getElementById('refreshPlayersBtn').addEventListener('click', loadPlayers);
            
            // ì´ˆê¸° ëŒ€ì‹œë³´ë“œ ë¡œë“œ
            loadDashboard();
        });

        console.log('ğŸš€ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ');
    </script>
</body>
</html>